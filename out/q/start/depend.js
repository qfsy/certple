(function(){"use strict";window.ACME={URL:"",SyncID:0,DirData:{},Directory:function(e,t){var r=++ACME.SyncID,a=ACME.URL,o="ACME_HTML_cache_"+a,i=function(n){var a=n.data;if(r!=ACME.SyncID)return t("cancel");var i=a.meta||{};if(!a.newOrder)return t("Not newOrder found: "+FormatText(JSON.stringify(a)));ACME.DirData=a,ACME.StepData.termsURL=i.termsOfService,ACME.StepData.needEAB=!!i.externalAccountRequired;var s=function(){localStorage[o]=JSON.stringify(n)};s(),e(n,s)},s=JSON.parse(localStorage[o]||"{}");if(s.time&&Date.now()-s.time<864e5)return i(s);n(a,null,function(e){i({data:e,time:Date.now()})},t)},StepData:{},ChallName:function(e){return"dns-01"==e.type?Lang("DNS 记录验证"," "):"http-01"==e.type?Lang("文件验证"," "):e.type.toUpperCase()},ChallSort:function(e){return"dns-01"==e.type?"1_"+e.type:"http-01"==e.type?"2_"+e.type:"3_"+e.type},GetJwsA:async function(e,t){var n=ACME.StepData.config.accountKey,r="ES256",a={name:"ECDSA",hash:"SHA-256"};"RSA"==n.type&&(r="RS256",a={name:"RSASSA-PKCS1-v1_5"}),e.alg=r;var o={protected:Json2UrlB64(e),payload:t?Json2UrlB64(t):""},i=Str2Bytes(o.protected+"."+o.payload),s=await crypto.subtle.sign(a,n.key,i);return o.signature=Bytes2UrlB64(s),o},GetNonceA:function(e){return new Promise(function(t,n){ACME.GetNonce(e,function(e){t(e)},function(e){n(new Error(e))})})},GetNonce:function(e,t,r){var a=ACME.PrevNonce;if(ACME.PrevNonce="",!e&&a)return t(a);n({url:ACME.DirData.newNonce,method:"HEAD",response:!1},null,function(e,n){ACME.PrevNonce="";var a=n.getResponseHeader("Replay-Nonce");a?t(a):r("GetNonce: "+Lang("此ACME服务对浏览器访问支持太差，无法跨域获取Replay-Nonce响应头。","This ACME service has too poor browser access support to get the Replay-Nonce response header across domains."),!0)},function(e){r("GetNonce: "+e)})},TestAccountCORS:function(e,t){n({url:ACME.DirData.newAccount,method:"POST",response:!1,nocheck:!0},{},function(n,r){r.status>0?e():t("["+r.status+"]",!0)},function(e){t(e)})},StepAccount:async function(e,t){var n=++ACME.SyncID,r="ACME.StepAccount";CLog(r,0,"==========Account Start==========");var a="";try{await ACME._StepAccountA(n,r)}catch(e){a=e.message||"-",CLog(r,1,a,e)}CLog(r,0,"==========Account End=========="),a?t(a):e()},_StepAccountA:async function(n,r){var a=ACME.DirData.newAccount,o=ACME.StepData.config,i={contact:["mailto:"+o.email],termsOfServiceAgreed:!0};if(ACME.StepData.needEAB){var s={protected:Json2UrlB64({alg:"HS256",kid:o.eabKid,url:a}),payload:Json2UrlB64(X509.PublicKeyJwk(o.accountKey))},c=await crypto.subtle.importKey("raw",UrlB642Bytes(o.eabKey),{name:"HMAC",hash:"SHA-256"},!0,["sign"]),u=Str2Bytes(s.protected+"."+s.payload),l=await crypto.subtle.sign("HMAC",c,u);s.signature=Bytes2UrlB64(l),i.externalAccountBinding=s,CLog(r,0,"externalAccountBinding",s)}var p=await ACME.GetJwsA({jwk:X509.PublicKeyJwk(o.accountKey),nonce:await ACME.GetNonceA(!0),url:a},i),h=await t(a,p);if(n!=ACME.SyncID)throw new Error("cancel");ACME.StepData.account={url:e(h.xhr,"Location"),data:h.data},CLog(r,0,"Account OK",ACME.StepData.account)},StepOrder:async function(e,t,n){var r=++ACME.SyncID,a="ACME.StepOrder";CLog(a,0,"==========Order Start==========");var o="";try{await ACME._StepOrderA(e,r,a)}catch(e){o=e.message||"-",CLog(a,1,o,e)}CLog(a,0,"==========Order End=========="),o?n(o):t()},_StepOrderA:async function(n,r,a){for(var o=ACME.DirData.newOrder,i=ACME.StepData.config,s=[],c=0;c<i.domains.length;c++)s.push({type:"dns",value:i.domains[c]});var u={identifiers:s};n("newOrder...");var l=await ACME.GetJwsA({kid:ACME.StepData.account.url,nonce:await ACME.GetNonceA(),url:o},u),p=await t(o,l);if(r!=ACME.SyncID)throw new Error("cancel");p.data.orderUrl=e(p.xhr,"Location"),ACME.StepData.order=p.data,CLog(a,0,"Order OK",ACME.StepData.order);var h=JSON.stringify(X509.PublicKeyJwk(i.accountKey)),y=await crypto.subtle.digest({name:"SHA-256"},Str2Bytes(h));y=Bytes2UrlB64(y);var f=ACME.StepData.order.identifiers,d=0,C=ACME.StepData.order.authorizations;for(c=0;c<f.length;c++)-1==i.domains.indexOf(f[c].value)&&(d=1);if(d||f.length!=C.length||f.length!=i.domains.length)throw new Error(Lang("创建的订单中的域名和配置的不一致","The domain name in the created order is inconsistent with the configuration"));if(r!=ACME.SyncID)throw new Error("cancel");ACME.StepData.auths={};for(c=0;c<C.length;c++){n("auth("+(c+1)+"/"+C.length+")...");o=C[c],l=await ACME.GetJwsA({kid:ACME.StepData.account.url,nonce:await ACME.GetNonceA(),url:o},""),p=await t(o,l);if(r!=ACME.SyncID)throw new Error("cancel");p.data.domain=f[c].value,p.data.authUrl=o,ACME.StepData.auths[f[c].value]=p.data;for(var A=p.data.challenges,g=0;g<A.length;g++){var S=A[g];S.authTxt=S.token+"."+y;var E=await crypto.subtle.digest({name:"SHA-256"},Str2Bytes(S.authTxt));if(r!=ACME.SyncID)throw new Error("cancel");S.authTxtSHA256=Bytes2UrlB64(E),S.authTxtSHA256Base64=Bytes2Base64(E)}}CLog(a,0,"Order Authorizations",ACME.StepData.auths)},StepVerifyAuthItem:async function(e,t,n,r){var a="ACME.verify["+e.challenges[t].type+"]:"+e.domain,o="";try{await ACME._StepVerifyAuthItemA(e,t,ACME.SyncID,a,n,r)}catch(e){o=e.message||"-",CLog(a,1,o,e)}o&&n(!1,1e3,o)},_StepVerifyAuthItemA:async function(e,n,r,a,o,i){var s=e.challenges[n];if(!s.isSend){var c=s.url,u=await ACME.GetJwsA({kid:ACME.StepData.account.url,nonce:await ACME.GetNonceA(),url:c},{}),l=await t({url:c,nocheck:!0},u),p=l.xhr.status;p>=200&&p<300&&(s.isSend=!0)}c=e.authUrl,u=await ACME.GetJwsA({kid:ACME.StepData.account.url,nonce:await ACME.GetNonceA(),url:c},""),l=await t(c,u);var h=l.data;return"pending"==h.status?(CLog(a,0,"pending..."),o(!1,1e3,"pending...")):"valid"==h.status?(CLog(a,0,"valid OK"),o(!0)):(CLog(a,1,"Fail",h),i(h.status+": "+FormatText(JSON.stringify(h))))},StepFinalizeOrder:async function(e,t,n){var r=++ACME.SyncID,a="ACME.StepFinalizeOrder";CLog(a,0,"==========Finalize Start==========");var o="";try{await ACME._StepFinalizeOrderA(e,r,a)}catch(e){o=e.message||"-",CLog(a,1,o,e)}CLog(a,0,"==========Finalize End=========="),o?n(o):t()},_StepFinalizeOrderA:async function(e,n,r){var a=ACME.StepData.order,o=ACME.StepData.config,i=o.domains;if(!a.finalizeIsSend){e("finalize...");var s=await new Promise(function(e,t){X509.CreateCSR(o.privateKey,i[0],i,function(t){e(t)},function(e){t(new Error(e))})});a.orderCSR=s,CLog(r,0,"CSR\n"+s),s=Bytes2UrlB64(ASN1.PEM2Bytes(s));var c=a.finalize,u=await ACME.GetJwsA({kid:ACME.StepData.account.url,nonce:await ACME.GetNonceA(),url:c},{csr:s}),l=await t(c,u);if(n!=ACME.SyncID)throw new Error("cancel");CLog(r,0,"finalize result",l.data),a.finalizeIsSend=!0}for(var p=Date.now(),h=0;!a.checkOK&&Date.now()-p<6e4;){if(n!=ACME.SyncID)throw new Error("cancel");h++,e("check retry:"+h+"...");c=a.orderUrl,u=await ACME.GetJwsA({kid:ACME.StepData.account.url,nonce:await ACME.GetNonceA(),url:c},""),l=await t(c,u);if(n!=ACME.SyncID)throw new Error("cancel");var y=l.data;if("valid"==y.status){a.checkOK=!0,a.certUrl=y.certificate,CLog(r,0,"check OK",y);break}if("invalid"==y.status)throw CLog(r,1,"check Fail",y),new Error(y.status+": "+FormatText(JSON.stringify(y)));CLog(r,0,y.status+"... wait 1s",y),await new Promise(function(e){setTimeout(e,1e3)})}if(!a.downloadPEM){e("download...");c=a.certUrl,u=await ACME.GetJwsA({kid:ACME.StepData.account.url,nonce:await ACME.GetNonceA(),url:c},""),l=await t({url:c,response:!1},u);if(n!=ACME.SyncID)throw new Error("cancel");var f=l.xhr.responseText;a.downloadPEM=f,CLog(r,0,"download OK\n"+f)}}};var e=function(e,t){var n=e.getResponseHeader(t);if(!n)throw acmeReadDirGotoCORS(),new Error(Lang("无法读取响应头"+t+"，可能是因为此ACME服务对跨域访问支持不良，请按第一步显示的提示操作。","The response header "+t+" cannot be read, This may be because this ACME service does not support cross domain access, Please follow the prompt displayed in step 1."));return n},t=function(e,t){return new Promise(function(r,a){n(e,t,function(e,t){r({data:e,xhr:t})},function(e){a(new Error(e))})})},n=function(e,t,n,r){var a="string"==typeof e?{url:e}:e;e=a.url;var o=a.method||(t?"POST":"GET"),i="ACME.Request";CLog(i,4,"send "+o,a,t);var s=new XMLHttpRequest;s.timeout=3e4,s.open(o,e,!0),s.onreadystatechange=function(){if(4==s.readyState){ACME.PrevNonce=s.getResponseHeader("Replay-Nonce")||"";var e,t,o=s.status<200||s.status>=300,c=null==a.response||a.response;if(c||o){t=s.responseText;try{e=JSON.parse(t),t=e}catch(e){}}if(CLog(i,4,"send End",a,{status:s.status,headers:s.getAllResponseHeaders()},t),a.nocheck||!o&&(!c||e))return n(e,s);r((o?"["+s.status+"]":"")+FormatText(s.responseText),s.status)}},t?("object"==typeof t&&(t=JSON.stringify(t)),s.setRequestHeader("Content-Type",a.contentType||"application/jose+json"),s.send(t)):s.send()}})(),function(){"use strict";for(var e in window.X509={DefaultType2_RSA:"2048",DefaultType2_ECC:"P-256",SupportECCType2:{"P-256":"prime256v1","P-384":"secp384r1","P-521":"secp521r1"},SupportECCType2Names:function(){var e=[];for(var t in X509.SupportECCType2)e.push(X509.SupportECCType2[t]);return e},KeyGenerate:function(e,t,n,r){var a=0;if("RSA"==e)a={publicExponent:new Uint8Array([1,0,1]),name:"RSASSA-PKCS1-v1_5",modulusLength:+t,hash:"SHA-256"};else{if("ECC"!=e)return void r("Not support "+e);a={name:"ECDSA",namedCurve:t}}crypto.subtle.generateKey(a,!0,["sign","verify"]).then(function(e){crypto.subtle.exportKey("jwk",e.privateKey).then(function(e){n(X509.KeyExport(e))}).catch(function(e){r(Lang("此浏览器不支持导出"+a.name+"+PKCS#8格式密钥：","This browser does not support exporting "+a.name+"+PKCS#8 format keys: ")+e.message)})}).catch(function(e){r(Lang("此浏览器不支持生成"+a.name+"：","This browser does not support generating "+a.name+": ")+e.message)})},KeyParse:function(e,t,n,r){var a={},o=function(e){a.error=e,n(e,a)};if(!/BEGIN\s*(RSA|EC)?\s*(PUBLIC|PRIVATE)\s*KEY/.test(e))return o(Lang("不是RSA或ECC密钥","Not an RSA or ECC key"));a.type="EC"==RegExp.$1?"ECC":RegExp.$1;var i,s,c=!!RegExp.$1,u="PUBLIC"==RegExp.$2;if(u&&r)return o(Lang("不是私钥","Is not a private key"));try{var l=null,p=ASN1.ParsePEM(e);if(a.asn1=p,c){if("RSA"==a.type)l=p;else if("ECC"==a.type){if(u)return o(Lang("不支持ECC PKCS#1格式公钥","ECC PKCS#1 format public key is not supported"));var h=p.sub[2].sub[0].oid;a.type2=ASN1.OID[h]||"",l=p}}else{var y=u?0:1,f=p.sub[y].sub[0].oid;h=p.sub[y].sub[1].oid;a.type=ASN1.OID[f]||"",a.type2=ASN1.OID[h]||"",l="ECC"==a.type&&u?p:(new ASN1).parse(p.sub[y+1].bytes)}a.paramAsn1=l}catch(e){return o(Lang("密钥解析失败：","Key resolution failed: ")+e.message)}if("RSA"==a.type){y=u?0:1;a.param={n:l.sub[y].bytes,e:l.sub[y+1].bytes,d:u?null:l.sub[y+2].bytes};for(var d="p,q,dp,dq,qi".split(","),C=0;C<5;C++)a.param[d[C]]=u?null:l.sub[y+3+C].bytes;a.type2=8*a.param.n.length+""}else{if("ECC"!=a.type)return o(Lang("不支持的密钥类型：","Unsupported key type: ")+f);if(!X509.SupportECCType2[a.type2])return o(Lang("只支持"+X509.SupportECCType2Names().join("、")+"曲线的ECC密钥","ECC key only supported for "+X509.SupportECCType2Names().join(",")+" curve"));if(u)var A=l.sub[1].bytes;else y=c?3:2,A=l.sub[y].sub[0].bytes;if(4!=A[0])return o("ECC !0x04: "+A[0]);var g=(A.length-1)/2;a.param={x:A.slice(1,1+g),y:A.slice(1+g),d:u?null:l.sub[1].bytes}}for(var S in a.isPKCS1=c,a.hasPrivate=!u,a.pem=e,"RSA"==a.type?(i={publicExponent:new Uint8Array(a.param.n.buffer),name:"RSASSA-PKCS1-v1_5",modulusLength:+a.type2,hash:"SHA-256"},s={kty:"RSA",alg:"RS256"}):"ECC"==a.type&&(i={name:"ECDSA",namedCurve:a.type2},s={kty:"EC",crv:a.type2}),s=Object.assign(s,{ext:!0,key_ops:[u?"verify":"sign"]}),a.param)a.param[S]&&(s[S]=Bytes2UrlB64(a.param[S]));crypto.subtle.importKey("jwk",s,i,!0,[u?"verify":"sign"]).then(function(e){a.key=e,t(a)}).catch(function(e){o(Lang("密钥转成CryptoKey失败：","Failed to convert key to CryptoKey: ")+e.message)})},PublicKeyJwk:function(e){var t=e.param;if("RSA"==e.type)return{e:Bytes2UrlB64(t.e),kty:"RSA",n:Bytes2UrlB64(t.n)};if("ECC"==e.type)return{crv:e.type2,kty:"EC",x:Bytes2UrlB64(t.x),y:Bytes2UrlB64(t.y)};throw new Error("Jwk: "+e.type)},KeyExport:function(e,t,n){var r="KeyExport: ",a=ASN1.S,o=ASN1.V,i=e.param,s=i&&e.type,c=e.type2;if(!i){if(!e.kty)throw new Error(r+"bad key");s="EC"==e.kty?"ECC":e.kty,"ECC"==s&&(c=e.crv)}var u=("ECC"==s?"x,y,d":"n,e,d,p,q,dp,dq,qi").split(",");if(!i){i={};for(var l=0;l<u.length;l++){var p=u[l],h=e[p];h&&(i[p]=UrlB642Bytes(h))}}var y,f=!t&&i.d;if("RSA"==s){var d=a(48,o(2,i.n),o(2,i.e));if(f){d.sub.splice(0,0,o(2,[0]));for(l=2;l<u.length;l++)d.push(o(2,i[u[l]]))}y=d.toBytes()}else{if("ECC"!=s)throw new Error(r+s);var C=new Uint8Array(1+2*i.x.length);C[0]=4,C.set(i.x,1),C.set(i.y,1+i.x.length),y=f?a(48,o(2,[1]),o(4,i.d),a(161,o(3,C))).toBytes():C}var A=a(48,o(6,ASN1.OID2Bytes(ASN1.OID[s])),"RSA"==s?o(5,[]):o(6,ASN1.OID2Bytes(ASN1.OID[c])));if(f)var g=a(48,o(2,[0]),A,o(4,y));else g=a(48,A,o(3,y));if(2==n)return g;if(y=g.toBytes(),1==n)return y;var S=Bytes2Base64(y).replace(/(.{64})/g,"$1\n").trim(),E=f?"PRIVATE":"PUBLIC";return"-----BEGIN "+E+" KEY-----\n"+S+"\n-----END "+E+" KEY-----"},CreateCSR:function(e,t,n,r,a){var o=ASN1.S,i=ASN1.V;try{var s=X509.KeyExport(e,!0,2)}catch(e){return a(e.message)}for(var c=o(48),u=0;u<n.length;u++)c.push(i(130,Str2Bytes(n[u])));var l=o(48,i(2,[0]),o(48,o(49,o(48,i(6,ASN1.OID2Bytes("2.5.4.3")),i(12,Str2Bytes(t))))),s,o(160,o(48,i(6,ASN1.OID2Bytes("1.2.840.113549.1.9.14")),o(49,o(48,o(48,i(6,ASN1.OID2Bytes("2.5.29.17")),i(4,c.toBytes()))))))),p=l.toBytes(),h={name:"ECDSA",hash:"SHA-256"};"RSA"==e.type&&(h={name:"RSASSA-PKCS1-v1_5"}),crypto.subtle.sign(h,e.key,p).then(function(t){var n=new Uint8Array(t);if("ECC"==e.type){var a=n.subarray(0,e.param.x.length),s=n.subarray(e.param.x.length);n=o(48,i(2,a),i(2,s)).toBytes()}var c=o(48,l,o(48,i(6,ASN1.OID2Bytes(ASN1.OID["SHA256_"+e.type])),"RSA"==e.type?i(5,[]):null),i(3,n)),u=c.toBytes(),p=Bytes2Base64(u).replace(/(.{64})/g,"$1\n").trim();r("-----BEGIN CERTIFICATE REQUEST-----\n"+p+"\n-----END CERTIFICATE REQUEST-----")}).catch(function(e){a("CSR sign:"+e.message)})}},window.ASN1=function(e,t){this.sub=[],e&&this.setTag(e),t&&this.setBytes(t)},ASN1.S=function(e){for(var t=new ASN1(e),n=1,r=arguments;n<r.length;n++)r[n]&&t.push(r[n]);return t},ASN1.V=function(e,t){return new ASN1(e,t)},ASN1.ParsePEM=function(e){return(new ASN1).parsePEM(e)},ASN1.TagNames={"01":"BOOLEAN","02":"INTEGER","03":"BIT_STRING","04":"OCTET_STRING","05":"NULL","06":"OID","0C":"UTF8String",13:"Printable_String",17:"UTCTime",18:"GeneralizedTime",30:"SEQUENCE",31:"SET"},ASN1.OID={"1.2.840.113549.1.1.1":"RSA","1.2.840.113549.1.1.11":"SHA256_RSA","1.2.840.10045.2.1":"ECC","1.2.840.10045.4.3.2":"SHA256_ECC","1.2.840.10045.3.1.7":"P-256","1.3.132.0.34":"P-384","1.3.132.0.35":"P-521"},ASN1.OID)ASN1.OID[ASN1.OID[e]]=e;ASN1.OID2Bytes=function(e){var t=e.split("."),n=[],r=+t[0],a=+t[1];if(!/^[\d\.]+$/.test(e)||t.length<3||r>2||40*r+a>255)throw new Error("bad oid: "+e);n.push(40*r+a);for(var o=2,i=t.length;o<i;o++){for(var s=+t[o],c=[];s>=128;)c.push(s%128),s/=128;c.push(s),c.reverse();for(var u=0,l=c.length-1;u<=l;u++)u!=l?n.push(128+c[u]):n.push(c[u])}return new Uint8Array(n)},ASN1.OID2Text=function(e){var t="",n=e[0],r=n<80?n<40?0:1:2;t+=r+"."+(n-40*r);for(var a=1,o=e.length;a<o;){for(var i=0;a<o;){var s=e[a++];if(i*=128,!(s>=128)){i+=s;break}i+=s-128}t+="."+i}return t},ASN1.ParseSize=function(e,t){var n=t[e[0]++],r=0;if(n<128)r=n;else if(128==n)r=-404;else for(var a=0,o=127&n;a<o;a++)r=256*r+t[e[0]++];if(r<0||r>t.length-e[0])throw new Error("ASN.1 Bad size "+r);return r},ASN1.ParseBlock=function(e,t,n){for(n=n||[];e[0]<t.length;){var r=e[0],a=new ASN1,o=t[e[0]++],i=ASN1.ParseSize(e,t);if(0!=(32&o))a.parse(t.slice(r,e[0]+i));else{var s=t.slice(e[0],e[0]+i);2!=o&&3!=o||s.length>1&&0==s[0]&&(s=s.slice(1)),a.setTag(o),a.setBytes(s)}n.push(a),e[0]+=i}return n},ASN1.PEM2Bytes=function(e){e=e.replace(/[\s\r\n]/g,"");var t=/^-+BEGIN\w*-+([^-]+)-+END\w+-+$/i.exec(e);try{return Base642Bytes(t[1])}catch(e){throw new Error(Lang("不是pem格式。","Not a pem format."))}},ASN1.prototype={setTag:function(e){var t=(e<16?"0":"")+e.toString(16).toUpperCase();this.tag=e,this.tagTxt=t,this.tagName=ASN1.TagNames[t]||"0x"+t},setBytes:function(e){if(null==e.length||null==e.slice&&null==e.subarray)throw new Error("Not Array");6==this.tag&&(this.oid=ASN1.OID2Text(e)),12!=this.tag&&19!=this.tag||(this.string=Bytes2Str(e)),this.bytes=e},push:function(e){if(!e.parsePEM)throw new Error("Not ASN1");return this.sub.push(e),this},parsePEM:function(e){return this.parse(ASN1.PEM2Bytes(e))},parse:function(e){var t=[0];if(0==(32&e[0]))throw new Error("ASN.1 parse: Not SEQ");this.setTag(e[t[0]++]);var n=ASN1.ParseSize(t,e);return e=e.slice(t[0],t[0]+n),this.setBytes(e),ASN1.ParseBlock([0],e,this.sub),this},toBytes:function(e){var t=[],n=0;if(this.sub.length)for(var r=0;r<this.sub.length;r++){var a=this.sub[r].toBytes();t.push(a),n+=a.length}else this.bytes&&this.bytes.length&&((2==this.tag&&this.bytes[0]>=128||3==this.tag)&&(t.push([0]),n++),t.push(this.bytes),n+=this.bytes.length);if(!e){a=[];var o=n;if(o<128)a.push(o);else{for(;o>255;)a.push(255&o),o>>=8;a.push(255&o),a.push(128+a.length)}a.push(this.tag),a.reverse(),t.splice(0,0,a),n+=a.length}var i=new Uint8Array(n),s=0;for(r=0;r<t.length;r++){a=t[r];i.set(a,s),s+=a.length}return i}}}(),function(){"use strict";window.LangCur="cn",window.Lang=function(e,t,n){const r=e,a=" "+t,o=n;if(o)return"cn"==LangCur?r:a;var i="",s={cn:r,en:a};for(var c in s)i+=(LangCur!=c?"<!--LangHide1-->":"")+'<span class="lang'+c.toUpperCase()+'" style="'+(LangCur==c?"":"display:none")+'">'+s[c]+"</span>"+(LangCur!=c?"<!--LangHide2-->":"");return i},window.LangReview=function(e){var t=$(e||"body");t.find(".langCN")["cn"==LangCur?"show":"hide"](),t.find(".langEN")["cn"!=LangCur?"show":"hide"]();for(var n=t.find(".inputLang"),r=0;r<n.length;r++)n[r].setAttribute("placeholder",n[r].getAttribute("placeholder-"+LangCur))},window.LangClick=function(e){LangCur=e,LangReview(),$(".langBtn").css("color",null),$(".langBtn_"+e).css("color","#000"),$("body").css("wordBreak","cn"==e?"break-all":null),document.titleLang||(document.titleLang=document.title);for(var t=document.titleLang.split("|"),n=[],r=[],a=0;a<t.length;a++)/[^\x00-\xff]/.test(t[a])==("cn"==LangCur)?n.push(t[a].trim()):r.push(t[a].trim());document.title=n.concat(r).join(" | ")},window.CLog=function(e,t,n){var r=new Date,a=("0"+r.getMinutes()).substr(-2)+":"+("0"+r.getSeconds()).substr(-2)+"."+("00"+r.getMilliseconds()).substr(-3);n=n.replace(/<!--LangHide1[\S\s]+?LangHide2-->/g,""),n=n.replace(/<[^>]+>/g,"");for(var o=["["+a+" "+e+"]"+n],i=3;i<arguments.length;i++)o.push(arguments[i]);var s=1==t?console.error:3==t?console.warn:4==t?console.debug:console.log;return s.apply(console,o),n},function(){window.$=function(t){return t&&t.is$?t:new e(t)};var e=function(e,t){if(this.length=0,e)if(e.appendChild)this.push(e);else for(var n=(t||document).querySelectorAll(e),r=0;r<n.length;r++)this.push(n[r])};e.prototype={is$:1,push:function(e){this[this.length++]=e},find:function(t){var n=this[0];return new e(n?t:"",n)},val:function(e){return this.prop("value",e)},hide:function(){return this.css("display","none")},show:function(e){return this.css("display",void 0===e?null:e)},html:function(e){var t=this[0];if(void 0===e)return t&&t.innerHTML||"";for(var n=0;n<this.length;n++)this[n].innerHTML=e;return this},append:function(e){return this._end(e)},prepend:function(e){return this._end(e,1)},_end:function(e,t){var n=this[0];if(e&&n){var r=e;if("string"==typeof e){var a=document.createElement("div");a.innerHTML=e,r=[];for(var o=0;o<a.childNodes.length;o++)r.push(a.childNodes[o])}else e.appendChild&&(r=[e]);t&&(t=n.firstChild);for(o=0;o<r.length;o++)t?n.insertBefore(r[o],t):n.appendChild(r[o])}return this},prop:function(e,t){var n=this[0];if(void 0===t)return n&&n[e];for(var r=0;r<this.length;r++)this[r][e]=t;return this},attr:function(e,t){var n=this[0];if(void 0===t)return n&&n.getAttribute(e);for(var r=0;r<this.length;r++)null==t?this[r].removeAttribute(e):this[r].setAttribute(e,t);return this},css:function(e,t){for(var n=0;n<this.length;n++)this[n].style[e]=t;return this},bind:function(e,t){for(var n=0;n<this.length;n++)this[n].addEventListener(e,t);return this}}}(),window.FormatText=function(e){return e.replace(/[&<>='"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},window.Str2Bytes=function(e){e=unescape(encodeURIComponent(e));for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},window.Bytes2Str=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},window.Json2UrlB64=function(e){return Bytes2UrlB64(JSON.stringify(e))},window.Base642Bytes=function(e){for(var t=atob(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},window.UrlB642Bytes=function(e){for(e=e.replace(/_/g,"/").replace(/-/g,"+");e.length%4;)e+="=";return Base642Bytes(e)},window.Bytes2UrlB64=function(e){return Bytes2Base64(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")},window.Bytes2Base64=function(e){var t="";if("string"==typeof e)t=unescape(encodeURIComponent(e));else{e instanceof ArrayBuffer&&(e=new Uint8Array(e));for(var n=0;n<e.length;n++)t+=String.fromCharCode(e[n])}return btoa(t)}}(),function(){"use strict";var msg="";try{window.PageRawHTML=window.PageRawHTML||document.documentElement.outerHTML;var SupportCrypto=!1;eval("SupportCrypto=!!crypto.subtle.sign"),eval("``;(async function(){class a{}})")}catch(e){return msg||SupportCrypto||!1!==window.isSecureContext||(msg="no-https"),msg||(msg=SupportCrypto?"browser-old-version":"no-crypto"),void(window.location.href="/info/errorPage/?msg="+encodeURIComponent(msg))}$(".main").html($(".main").html()),$("input,textarea,select").attr("autocomplete","off"),$(".main-load").hide(),$(".main").show(),LangClick(LangCur),initMainUI()}();